<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
<title>Monsieur</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400;0,6..96,700;1,6..96,400&family=EB+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Jost:wght@200;300;400;500&display=swap" rel="stylesheet"/>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root{
  --void:#060504;--deep:#0d0b09;--surface:#161310;
  --card:#1c1814;--card2:#221e19;
  --gold:#c8a45a;--gold2:#e2c07a;--gold3:#f5dda0;
  --ember:#d4621a;--cream:#f2e8d8;--fog:#8a7f72;
  --rim:rgba(200,164,90,.18);--rim2:rgba(200,164,90,.07);
  --r:14px;
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{background:var(--void);color:var(--cream);font-family:'Jost',sans-serif;font-weight:300;min-height:100vh;overflow-x:hidden}

/* GRAIN */
body::before{content:'';position:fixed;inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
  pointer-events:none;z-index:9999;opacity:.6;animation:grainShift 0.5s steps(2) infinite;}
@keyframes grainShift{0%{transform:translate(0,0)}25%{transform:translate(-1px,1px)}50%{transform:translate(1px,-1px)}75%{transform:translate(-1px,-1px)}100%{transform:translate(1px,1px)}}

/* ‚ïê‚ïê HERO ‚ïê‚ïê */
.hero{position:relative;height:310px;overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding-bottom:38px}
.hero-bg{position:absolute;inset:-5%;
  background:url('https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=900&q=85') center/cover no-repeat;
  animation:heroBreath 20s ease-in-out infinite alternate;will-change:transform;}
@keyframes heroBreath{0%{transform:scale(1.12) translateY(0)}100%{transform:scale(1) translateY(-2%)}}
.hero-bg::after{content:'';position:absolute;inset:0;
  background:linear-gradient(180deg,rgba(6,5,4,.15) 0%,rgba(6,5,4,.55) 50%,rgba(6,5,4,1) 100%);}

/* Animated orbs */
.orb{position:absolute;border-radius:50%;filter:blur(50px);pointer-events:none;}
.orb1{width:200px;height:200px;background:radial-gradient(circle,rgba(200,164,90,.22),transparent 70%);top:-60px;left:-40px;animation:orb1Drift 15s ease-in-out infinite alternate;}
.orb2{width:130px;height:130px;background:radial-gradient(circle,rgba(212,98,26,.15),transparent 70%);top:10px;right:-10px;animation:orb2Drift 11s ease-in-out infinite alternate;}
.orb3{width:100px;height:100px;background:radial-gradient(circle,rgba(200,164,90,.12),transparent 70%);bottom:50px;right:40px;animation:orb3Drift 17s ease-in-out infinite alternate;}
@keyframes orb1Drift{0%{transform:translate(0,0) scale(1)}100%{transform:translate(30px,20px) scale(1.15)}}
@keyframes orb2Drift{0%{transform:translate(0,0)}100%{transform:translate(-20px,25px)}}
@keyframes orb3Drift{0%{transform:translate(0,0) scale(1)}100%{transform:translate(-15px,-20px) scale(.85)}}

/* Scanline shimmer */
.hero::after{content:'';position:absolute;inset:0;
  background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(255,255,255,.012) 2px,rgba(255,255,255,.012) 4px);
  pointer-events:none;z-index:1;}

.hero-content{position:relative;z-index:2;text-align:center}
.hero-eyebrow{font-size:9px;letter-spacing:5px;text-transform:uppercase;color:var(--gold);margin-bottom:12px;animation:fadeUp .9s .15s both;}
.hero-title{
  font-family:'Bodoni Moda',serif;font-size:58px;font-weight:700;letter-spacing:3px;line-height:.9;
  background:linear-gradient(160deg,#fff 20%,var(--gold2) 55%,var(--gold3) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  animation:titleReveal .9s .3s both;filter:drop-shadow(0 0 30px rgba(200,164,90,.3));}
@keyframes titleReveal{from{opacity:0;transform:translateY(20px) scale(.97)}to{opacity:1;transform:none}}
.hero-sub{font-family:'EB Garamond',serif;font-style:italic;font-size:17px;color:var(--gold);margin-top:9px;letter-spacing:2px;animation:fadeUp .9s .5s both;}
.hero-ornament{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:14px;animation:fadeUp .9s .65s both;}
.hero-ornament::before,.hero-ornament::after{content:'';flex:1;max-width:35px;height:1px;background:linear-gradient(90deg,transparent,var(--gold));}
.hero-ornament::after{background:linear-gradient(90deg,var(--gold),transparent);}
.hero-ornament span{font-size:10px;color:var(--gold);letter-spacing:2px}

/* ‚ïê‚ïê NAV ‚ïê‚ïê */
.nav{display:flex;background:rgba(13,11,9,.92);border-bottom:1px solid var(--rim2);position:sticky;top:0;z-index:100;backdrop-filter:blur(20px);}
.nav-btn{flex:1;padding:15px 4px;background:none;border:none;color:var(--fog);font-family:'Jost',sans-serif;font-size:9.5px;letter-spacing:2px;text-transform:uppercase;cursor:pointer;position:relative;transition:color .3s;}
.nav-btn.active{color:var(--gold)}
.nav-glow{position:absolute;bottom:0;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent);transition:left .4s cubic-bezier(.77,0,.18,1),width .4s cubic-bezier(.77,0,.18,1);pointer-events:none;}
.nav-btn.active::before{content:'';position:absolute;inset:0;background:linear-gradient(180deg,transparent,rgba(200,164,90,.04));pointer-events:none;}

/* ‚ïê‚ïê PAGE TRANSITIONS ‚ïê‚ïê */
.page{display:none;padding-bottom:110px}
.page.active{display:block;animation:pageIn .4s cubic-bezier(.25,.1,.25,1)}
@keyframes pageIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

/* ‚ïê‚ïê SECTION HEAD ‚ïê‚ïê */
.s-head{padding:26px 20px 0}
.s-title{font-family:'Bodoni Moda',serif;font-size:27px;font-weight:400;line-height:1}
.s-title em{color:var(--gold);font-style:normal}
.s-rule{height:1px;margin:10px 20px 0;background:linear-gradient(90deg,rgba(200,164,90,.4),transparent);}

/* ‚ïê‚ïê CATEGORIES ‚ïê‚ïê */
.cat-wrap{padding:18px 20px 14px;overflow-x:auto;scrollbar-width:none;display:flex;gap:8px}
.cat-wrap::-webkit-scrollbar{display:none}
.cat-pill{flex-shrink:0;padding:8px 18px;border-radius:30px;border:1px solid var(--rim2);background:none;color:var(--fog);font-family:'Jost',sans-serif;font-size:11px;letter-spacing:1.5px;text-transform:uppercase;cursor:pointer;transition:all .25s;white-space:nowrap;position:relative;overflow:hidden;}
.cat-pill::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,var(--gold),var(--gold2));opacity:0;transition:opacity .25s;}
.cat-pill span{position:relative;z-index:1}
.cat-pill.active{border-color:var(--gold);color:var(--void);}
.cat-pill.active::before{opacity:1}

/* ‚ïê‚ïê MENU ‚ïê‚ïê */
.menu-grid{padding:0 16px;display:flex;flex-direction:column;gap:10px}
.mcard{display:flex;background:var(--card);border:1px solid var(--rim2);border-radius:var(--r);overflow:hidden;position:relative;
  transition:border-color .3s,box-shadow .3s;
  opacity:0;transform:translateY(18px) scale(.99);}
.mcard.in{animation:cardIn .45s cubic-bezier(.34,1.1,.64,1) forwards}
@keyframes cardIn{to{opacity:1;transform:none}}
.mcard:active{transform:scale(.985)!important;transition:transform .1s}

/* shimmer loading */
.mcard-img-wrap{position:relative;width:105px;flex-shrink:0;overflow:hidden;background:var(--card2);}
.mcard-img-wrap::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.04),transparent);transform:translateX(-100%);animation:imgShimmer 1.5s ease infinite;}
@keyframes imgShimmer{to{transform:translateX(100%)}}
.mcard-img{width:100%;height:100%;object-fit:cover;min-height:108px;display:block;transition:transform .55s cubic-bezier(.25,.1,.25,1),opacity .3s;opacity:0;}
.mcard-img.loaded{opacity:1}
.mcard:hover .mcard-img{transform:scale(1.07)}
.mcard-img-overlay{position:absolute;inset:0;background:linear-gradient(90deg,transparent 55%,var(--card));}

.mcard-body{flex:1;padding:14px 14px 14px 2px;display:flex;flex-direction:column;justify-content:space-between;}
.mcard-name{font-family:'Bodoni Moda',serif;font-size:15.5px;line-height:1.2;margin-bottom:4px;}
.mcard-desc{font-family:'EB Garamond',serif;font-style:italic;font-size:13px;color:var(--fog);line-height:1.4;flex:1;}
.mcard-foot{display:flex;align-items:center;justify-content:space-between;margin-top:10px;}
.mcard-price{font-size:15px;font-weight:400;background:linear-gradient(135deg,var(--gold),var(--gold2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.mcard-action{display:flex;align-items:center}

/* Add btn */
.add-btn{width:33px;height:33px;border-radius:50%;border:1.5px solid var(--gold);background:none;color:var(--gold);font-size:22px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;position:relative;overflow:hidden;}
.add-btn::before{content:'';position:absolute;inset:0;background:var(--gold);border-radius:50%;transform:scale(0);transition:transform .3s cubic-bezier(.34,1.4,.64,1);}
.add-btn:active::before{transform:scale(1)}
.add-btn .plus{position:relative;z-index:1;pointer-events:none;transition:color .1s;line-height:1;}
.add-btn:active .plus{color:var(--void)}

/* Qty */
.qty-ctrl{display:flex;align-items:center;gap:7px}
.qty-btn{width:29px;height:29px;border-radius:50%;border:1px solid var(--rim);background:none;color:var(--cream);font-size:17px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;}
.qty-btn:active{border-color:var(--gold);color:var(--gold);transform:scale(.88)}
.qty-num{font-size:15px;font-weight:500;min-width:20px;text-align:center;}
.qty-num.bump{animation:numBump .22s ease}
@keyframes numBump{0%,100%{transform:scale(1)}50%{transform:scale(1.45)}}

/* Cart badge */
.cart-badge{display:inline-flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--gold),var(--gold2));color:var(--void);border-radius:10px;padding:1px 7px;font-size:10px;font-weight:700;margin-left:5px;vertical-align:middle;}
.cart-badge.pop{animation:badgePop .3s cubic-bezier(.34,1.6,.64,1)}
@keyframes badgePop{0%{transform:scale(0)}100%{transform:scale(1)}}

/* ‚ïê‚ïê BOOKING ‚ïê‚ïê */
.book-form{padding:4px 20px;display:flex;flex-direction:column;gap:22px}
.f-group{display:flex;flex-direction:column;gap:9px}
.f-label{font-size:9px;letter-spacing:3px;text-transform:uppercase;color:var(--gold);}
.f-input,.f-select,.f-textarea{
  background:var(--card);border:1px solid var(--rim2);border-radius:12px;
  padding:14px 16px;color:var(--cream);font-family:'Jost',sans-serif;font-size:15px;font-weight:300;
  outline:none;transition:border-color .25s,box-shadow .25s,background .25s;
  width:100%;-webkit-appearance:none;appearance:none;}
.f-input:focus,.f-select:focus,.f-textarea:focus{
  border-color:rgba(200,164,90,.5);box-shadow:0 0 0 3px rgba(200,164,90,.07);background:var(--card2);}
.f-input::placeholder{color:var(--fog)}
.f-textarea{resize:none}

/* Phone input with prefix */
.phone-wrap{position:relative}
.phone-prefix{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--cream);font-size:15px;pointer-events:none;font-family:'Jost',sans-serif;}
.phone-input{padding-left:40px!important}

/* Time grid */
.time-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.t-btn{padding:11px 0;border:1px solid var(--rim2);border-radius:12px;background:none;color:var(--fog);font-family:'Jost',sans-serif;font-size:13px;cursor:pointer;transition:all .25s;position:relative;overflow:hidden;}
.t-btn .t-time{display:block;font-size:13px;}
.t-btn .t-stat{display:block;font-size:8px;letter-spacing:1px;text-transform:uppercase;margin-top:2px;}
.t-btn.free{color:var(--fog)}
.t-btn.free:hover{border-color:rgba(200,164,90,.3);color:var(--cream)}
.t-btn.free::after{content:'';position:absolute;inset:0;background:radial-gradient(circle at center,rgba(200,164,90,.07),transparent);opacity:0;transition:opacity .25s;}
.t-btn.free:hover::after{opacity:1}
.t-btn.sel{background:linear-gradient(135deg,rgba(200,164,90,.15),rgba(200,164,90,.05));border-color:var(--gold);color:var(--gold);}
.t-btn.sel .t-stat{color:var(--gold)}
.t-btn.busy{opacity:.4;cursor:not-allowed;background:repeating-linear-gradient(-45deg,transparent,transparent 5px,rgba(255,255,255,.012) 5px,rgba(255,255,255,.012) 10px);}
.t-btn.busy .t-stat{color:var(--ember)}

/* Guests */
.guest-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:6px}
.g-btn{padding:13px 0;border:1px solid var(--rim2);border-radius:12px;background:none;color:var(--fog);font-family:'Jost',sans-serif;font-size:15px;cursor:pointer;transition:all .22s;}
.g-btn.active{background:linear-gradient(135deg,var(--gold),var(--gold2));border-color:transparent;color:var(--void);font-weight:500;}

/* CTA button */
.cta-btn{
  width:100%;padding:18px;
  background:linear-gradient(110deg,var(--gold) 0%,var(--gold2) 40%,var(--gold3) 70%,var(--gold2) 100%);
  background-size:300% 100%;
  border:none;border-radius:14px;color:var(--void);
  font-family:'Bodoni Moda',serif;font-size:17px;font-weight:700;letter-spacing:.5px;
  cursor:pointer;position:relative;overflow:hidden;
  transition:transform .15s,box-shadow .3s;
  animation:btnShine 4s linear infinite;}
@keyframes btnShine{0%{background-position:100% 0}100%{background-position:-100% 0}}
.cta-btn:active{transform:scale(.98);box-shadow:none}
.cta-btn:disabled{opacity:.35;pointer-events:none;animation:none}
.cta-btn::after{content:'';position:absolute;top:0;left:-100%;width:50%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:btnGlint 4s ease infinite 2s;}
@keyframes btnGlint{0%,100%{left:-100%}50%{left:150%}}

/* Ripple */
.rpl{position:absolute;border-radius:50%;background:rgba(255,255,255,.35);transform:scale(0);animation:rplAnim .55s linear;pointer-events:none;}
@keyframes rplAnim{to{transform:scale(4);opacity:0}}

/* ‚ïê‚ïê ORDER ‚ïê‚ïê */
.order-list{padding:0 16px;display:flex;flex-direction:column;gap:8px}
.oitem{display:flex;align-items:center;gap:12px;background:var(--card);border:1px solid var(--rim2);border-radius:12px;padding:12px 14px;animation:slideIn .3s ease;}
@keyframes slideIn{from{opacity:0;transform:translateX(-10px)}}
.oitem-img{width:48px;height:48px;border-radius:8px;object-fit:cover}
.oitem-name{font-family:'Bodoni Moda',serif;font-size:14.5px}
.oitem-qty{font-size:11px;color:var(--fog);margin-top:2px}
.oitem-price{font-size:14px;font-weight:400;background:linear-gradient(135deg,var(--gold),var(--gold2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-left:auto;}
.order-summary{margin:14px 20px 0;background:var(--card);border:1px solid var(--rim2);border-radius:14px;padding:18px;}
.sum-row{display:flex;justify-content:space-between;font-size:13px;color:var(--fog);padding:4px 0}
.sum-row.total{font-family:'Bodoni Moda',serif;font-size:18px;color:var(--cream);border-top:1px solid var(--rim);margin-top:10px;padding-top:14px}
.sum-row.total span:last-child{background:linear-gradient(135deg,var(--gold),var(--gold2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.empty-state{text-align:center;padding:70px 20px;animation:fadeUp .5s ease}
.empty-icon{font-size:52px;margin-bottom:14px}
.empty-txt{font-family:'EB Garamond',serif;font-style:italic;font-size:19px;color:var(--fog);line-height:1.6}

/* ‚ïê‚ïê ABOUT ‚ïê‚ïê */
.about-wrap{padding:4px 20px}
.about-img-wrap{position:relative;height:195px;border-radius:16px;overflow:hidden;margin-bottom:20px;}
.about-img{width:100%;height:100%;object-fit:cover;transition:transform .6s ease}
.about-img-wrap:hover .about-img{transform:scale(1.04)}
.about-img-wrap::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg,transparent 40%,rgba(6,5,4,.65));}
.about-txt{font-family:'EB Garamond',serif;font-size:17px;line-height:1.75;color:#c2b8ad;margin-bottom:18px}
.info-list{display:flex;flex-direction:column;gap:8px}
.info-item{display:flex;align-items:center;gap:14px;background:var(--card);border:1px solid var(--rim2);border-radius:12px;padding:14px 16px;transition:border-color .25s,background .25s;text-decoration:none;color:inherit;}
.info-item:hover{border-color:var(--rim);background:var(--card2)}
.info-item:active{transform:scale(.98)}
.info-icon{font-size:20px;width:28px;text-align:center;flex-shrink:0}
.info-lbl{font-size:9px;letter-spacing:2.5px;text-transform:uppercase;color:var(--gold)}
.info-val{font-size:14px;margin-top:3px}
.info-arrow{margin-left:auto;color:var(--fog);font-size:12px;opacity:.6}

/* ‚ïê‚ïê TOAST ‚ïê‚ïê */
.toast{position:fixed;bottom:90px;left:50%;transform:translateX(-50%) translateY(10px);background:var(--card2);border:1px solid var(--rim);color:var(--cream);padding:10px 22px;border-radius:30px;font-size:13px;opacity:0;z-index:1000;transition:all .35s cubic-bezier(.34,1.3,.64,1);pointer-events:none;white-space:nowrap;}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* ‚ïê‚ïê SUCCESS OVERLAY ‚ïê‚ïê */
.success-overlay{display:none;position:fixed;inset:0;background:rgba(6,5,4,.97);z-index:500;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px;}
.success-overlay.show{display:flex;animation:overlayIn .45s cubic-bezier(.34,1.1,.64,1)}
@keyframes overlayIn{from{opacity:0;transform:scale(.93)}to{opacity:1;transform:scale(1)}}

/* Particles container */
.sparks{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.spark{position:absolute;border-radius:50%;animation:sparkFly var(--dur,1s) var(--del,0s) ease-out both;}
@keyframes sparkFly{0%{transform:translate(0,0) scale(1);opacity:1}100%{transform:translate(var(--tx,0px),var(--ty,0px)) scale(0);opacity:0}}

/* Rings */
.success-rings{position:relative;width:100px;height:100px;margin-bottom:24px}
.s-ring{position:absolute;border-radius:50%;border:1px solid;animation:ringExpand 1.5s ease-out infinite;}
.s-ring:nth-child(1){inset:0;border-color:rgba(200,164,90,.6);animation-delay:0s}
.s-ring:nth-child(2){inset:-12px;border-color:rgba(200,164,90,.3);animation-delay:.3s}
.s-ring:nth-child(3){inset:-24px;border-color:rgba(200,164,90,.1);animation-delay:.6s}
@keyframes ringExpand{0%{transform:scale(.5);opacity:1}100%{transform:scale(1.3);opacity:0}}
.s-center{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:38px;animation:iconDrop .5s .15s cubic-bezier(.34,1.5,.64,1) both}
@keyframes iconDrop{from{transform:scale(0) rotate(-30deg);opacity:0}}

.success-title{font-family:'Bodoni Moda',serif;font-size:32px;font-weight:700;
  background:linear-gradient(135deg,var(--gold),var(--gold3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  margin-bottom:12px;animation:fadeUp .45s .3s both;}
.success-text{font-family:'EB Garamond',serif;font-style:italic;font-size:16px;color:var(--fog);line-height:1.75;margin-bottom:32px;white-space:pre-line;animation:fadeUp .45s .4s both;}
.success-cta{width:100%;max-width:290px;animation:fadeUp .45s .5s both}

/* ‚ïê‚ïê UTILS ‚ïê‚ïê */
@keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:none}}
.pb{height:24px}
</style>
</head>
<body>

<!-- HERO -->
<div class="hero">
  <div class="hero-bg"></div>
  <div class="orb orb1"></div>
  <div class="orb orb2"></div>
  <div class="orb orb3"></div>
  <div class="hero-content">
    <div class="hero-eyebrow">Fine Dining ¬∑ –ú–æ—Å–∫–≤–∞</div>
    <h1 class="hero-title">Monsieur</h1>
    <p class="hero-sub">cuisine fran√ßaise</p>
    <div class="hero-ornament"><span>‚ú¶</span></div>
  </div>
</div>

<!-- NAV -->
<nav class="nav" id="nav">
  <button class="nav-btn active" data-page="menu">–ú–µ–Ω—é</button>
  <button class="nav-btn" data-page="booking">–ë—Ä–æ–Ω—å</button>
  <button class="nav-btn" data-page="order">–ó–∞–∫–∞–∑ <span class="cart-badge" id="cartBadge" style="display:none">0</span></button>
  <button class="nav-btn" data-page="about">–û –Ω–∞—Å</button>
  <div class="nav-glow" id="navGlow"></div>
</nav>

<!-- ‚ïê‚ïê MENU ‚ïê‚ïê -->
<div id="page-menu" class="page active">
  <div class="s-head"><div class="s-title">–ù–∞—à–µ <em>–º–µ–Ω—é</em></div></div>
  <div class="s-rule"></div>
  <div class="cat-wrap" id="catWrap"></div>
  <div class="menu-grid" id="menuGrid"></div>
  <div class="pb"></div>
</div>

<!-- ‚ïê‚ïê BOOKING ‚ïê‚ïê -->
<div id="page-booking" class="page">
  <div class="s-head"><div class="s-title">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å <em>—Å—Ç–æ–ª–∏–∫</em></div></div>
  <div class="s-rule"></div>
  <div style="height:20px"></div>
  <div class="book-form">
    <div class="f-group">
      <label class="f-label">–í–∞—à–µ –∏–º—è</label>
      <input id="bName" type="text" class="f-input" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" autocomplete="name"/>
    </div>
    <div class="f-group">
      <label class="f-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
      <div class="phone-wrap">
        <span class="phone-prefix">+7</span>
        <input id="bPhone" type="tel" class="f-input phone-input" placeholder="(900) 000-00-00" maxlength="15" inputmode="numeric"/>
      </div>
    </div>
    <div class="f-group">
      <label class="f-label">–î–∞—Ç–∞</label>
      <input id="bDate" type="date" class="f-input"/>
    </div>
    <div class="f-group">
      <label class="f-label">–í—Ä–µ–º—è</label>
      <div class="time-grid" id="timeGrid"></div>
    </div>
    <div class="f-group">
      <label class="f-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π</label>
      <div class="guest-grid" id="guestGrid"></div>
    </div>
    <div class="f-group">
      <label class="f-label">–ü–æ–∂–µ–ª–∞–Ω–∏—è</label>
      <textarea id="bComment" class="f-textarea" rows="3" placeholder="–¢–∏—Ö–∏–π —É–≥–æ–ª, –≤–∏–¥ –Ω–∞ –∑–∞–ª, –¥–µ—Ç—Å–∫–æ–µ –∫—Ä–µ—Å–ª–æ‚Ä¶"></textarea>
    </div>
    <button class="cta-btn" onclick="submitBooking(event)">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
  </div>
  <div class="pb"></div>
</div>

<!-- ‚ïê‚ïê ORDER ‚ïê‚ïê -->
<div id="page-order" class="page">
  <div class="s-head"><div class="s-title">–í–∞—à <em>–∑–∞–∫–∞–∑</em></div></div>
  <div class="s-rule"></div>
  <div style="height:16px"></div>
  <div id="orderContent"></div>
  <div class="pb"></div>
</div>

<!-- ‚ïê‚ïê ABOUT ‚ïê‚ïê -->
<div id="page-about" class="page">
  <div class="s-head"><div class="s-title">–û <em>—Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ</em></div></div>
  <div class="s-rule"></div>
  <div style="height:20px"></div>
  <div class="about-wrap">
    <div class="about-img-wrap">
      <img class="about-img" src="https://images.unsplash.com/photo-1559339352-11d035aa65de?w=800&q=80" alt="–ó–∞–ª"/>
    </div>
    <p class="about-txt">Monsieur ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –∫–∞–∂–¥–æ–µ –±–ª—é–¥–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é. –í–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞–¥–∏—Ü–∏–µ–π —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–π –∫—É—Ö–Ω–∏, –º—ã —Å–æ–∑–¥–∞—ë–º –≤–µ—á–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –Ω–∞–≤—Å–µ–≥–¥–∞.</p>
    <p class="about-txt">–®–µ—Ñ –ü—å–µ—Ä –õ–µ—Ñ–µ–≤—Ä —Å–æ–±—Ä–∞–ª –∫–æ–º–∞–Ω–¥—É –∏–∑ –ª—É—á—à–∏—Ö –∫—É–ª–∏–Ω–∞—Ä–æ–≤ –ï–≤—Ä–æ–ø—ã. –ü—Ä–æ–¥—É–∫—Ç—ã –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Å —Ñ–µ—Ä–º –ü—Ä–æ–≤–∞–Ω—Å–∞ –∏ –ë—É—Ä–≥—É–Ω–¥–∏–∏.</p>
    <div class="info-list">
      <!-- –ê–¥—Ä–µ—Å ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –∫–∞—Ä—Ç -->
      <a class="info-item" href="#" onclick="openMaps(event)">
        <div class="info-icon">üìç</div>
        <div><div class="info-lbl">–ê–¥—Ä–µ—Å</div><div class="info-val">–ú–æ—Å–∫–≤–∞, —É–ª. –ö—É–∑–Ω–µ—Ü–∫–∏–π –ú–æ—Å—Ç, 7</div></div>
        <div class="info-arrow">‚Ä∫</div>
      </a>
      <div class="info-item">
        <div class="info-icon">üïê</div>
        <div><div class="info-lbl">–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</div><div class="info-val">–ü–Ω‚Äì–ü—Ç 12:00‚Äì23:00 ¬∑ –°–±‚Äì–í—Å 11:00‚Äì00:00</div></div>
      </div>
      <!-- –¢–µ–ª–µ—Ñ–æ–Ω ‚Üí –∑–≤–æ–Ω–æ–∫ -->
      <a class="info-item" href="tel:+74951234567">
        <div class="info-icon">üìû</div>
        <div><div class="info-lbl">–¢–µ–ª–µ—Ñ–æ–Ω</div><div class="info-val">+7 (495) 123-45-67</div></div>
        <div class="info-arrow">‚Ä∫</div>
      </a>
      <div class="info-item">
        <div class="info-icon">‚≠ê</div>
        <div><div class="info-lbl">–†–µ–π—Ç–∏–Ω–≥</div><div class="info-val">4.9 ¬∑ Michelin Recommended 2024</div></div>
      </div>
    </div>
  </div>
  <div class="pb"></div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- SUCCESS -->
<div class="success-overlay" id="successOverlay">
  <div class="sparks" id="sparks"></div>
  <div class="success-rings">
    <div class="s-ring"></div><div class="s-ring"></div><div class="s-ring"></div>
    <div class="s-center" id="sIcon">‚úì</div>
  </div>
  <div class="success-title" id="sTitle"></div>
  <div class="success-text" id="sText"></div>
  <div class="success-cta">
    <button class="cta-btn" onclick="closeSuccess()">–û—Ç–ª–∏—á–Ω–æ!</button>
  </div>
</div>

<!-- MAPS MODAL -->
<div id="mapsModal" style="display:none;position:fixed;inset:0;background:rgba(6,5,4,.85);z-index:600;align-items:flex-end;justify-content:center;">
  <div style="background:var(--card2);border-radius:20px 20px 0 0;padding:24px 20px 40px;width:100%;max-width:500px;animation:slideUpModal .3s ease">
    <div style="font-family:'Bodoni Moda',serif;font-size:18px;margin-bottom:6px">–û—Ç–∫—Ä—ã—Ç—å –≤ –∫–∞—Ä—Ç–∞—Ö</div>
    <div style="font-size:13px;color:var(--fog);margin-bottom:20px">–ö—É–∑–Ω–µ—Ü–∫–∏–π –ú–æ—Å—Ç, 7, –ú–æ—Å–∫–≤–∞</div>
    <div style="display:flex;flex-direction:column;gap:10px">
      <a href="https://yandex.ru/maps/?text=–ö—É–∑–Ω–µ—Ü–∫–∏–π+–ú–æ—Å—Ç+7+–ú–æ—Å–∫–≤–∞" target="_blank" class="cta-btn" style="display:block;text-align:center;text-decoration:none;padding:14px">üó∫ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã</a>
      <a href="https://www.google.com/maps/search/–ö—É–∑–Ω–µ—Ü–∫–∏–π+–ú–æ—Å—Ç+7+–ú–æ—Å–∫–≤–∞" target="_blank" class="cta-btn" style="display:block;text-align:center;text-decoration:none;padding:14px;background:linear-gradient(110deg,#4285F4,#34A853,#FBBC05,#EA4335);background-size:300% 100%;animation:btnShine 4s linear infinite">üåê Google Maps</a>
      <button onclick="document.getElementById('mapsModal').style.display='none'" style="padding:12px;background:none;border:1px solid var(--rim);border-radius:12px;color:var(--fog);font-family:'Jost',sans-serif;font-size:14px;cursor:pointer">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>
@keyframes slideUpModal{from{transform:translateY(100%)}to{transform:none}}

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DATA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const MENU=[
  {id:1,cat:'starters',name:'–¢–∞—Ä—Ç–∞—Ä –∏–∑ —Ç—É–Ω—Ü–∞',desc:'–°–≤–µ–∂–∏–π —Ç—É–Ω–µ—Ü, –∞–≤–æ–∫–∞–¥–æ, –∏–∫—Ä–∞ —Ç–æ–±–∏–∫–æ, –ª–∏–º–æ–Ω',price:890,img:'https://images.unsplash.com/photo-1626645738196-c2a7c87a8f58?w=400&q=80'},
  {id:2,cat:'starters',name:'–õ—É–∫–æ–≤—ã–π —Å—É–ø',desc:'–ö–∞—Ä–∞–º–µ–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª—É–∫, –≥—Ä—é–π–µ—Ä, –∫—Ä—É—Ç–æ–Ω',price:590,img:'https://images.unsplash.com/photo-1547592166-23ac45744acd?w=400&q=80'},
  {id:3,cat:'starters',name:'–§—É–∞-–≥—Ä–∞',desc:'–£—Ç–∏–Ω–∞—è –ø–µ—á–µ–Ω—å, –∫–∞—Ä–∞–º–µ–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥—Ä—É—à–∞, –±—Ä–∏–æ—à—å',price:1490,img:'https://images.unsplash.com/photo-1600891964092-4316c288032e?w=400&q=80'},
  {id:4,cat:'mains',name:'–£—Ç–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞',desc:'Magret de canard, —Å–æ—É—Å –∏–∑ –∫—Ä–∞—Å–Ω–æ–≥–æ –≤–∏–Ω–∞, —Ç–∏–º—å—è–Ω',price:1890,img:'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&q=80'},
  {id:5,cat:'mains',name:'–î–æ—Ä–∞–¥–æ –Ω–∞ –≥—Ä–∏–ª–µ',desc:'–ü—Ä–æ–≤–∞–Ω—Å–∫–∏–µ –æ–≤–æ—â–∏, –±–∞–∑–∏–ª–∏–∫–æ–≤–æ–µ –º–∞—Å–ª–æ',price:1650,img:'https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=400&q=80'},
  {id:6,cat:'mains',name:'–ì–æ–≤—è–∂—å–µ —Ñ–∏–ª–µ',desc:'–°—Ç–µ–π–∫, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ –ø—é—Ä–µ, —Ç—Ä—é—Ñ–µ–ª—å–Ω—ã–π —Å–æ—É—Å',price:2890,img:'https://images.unsplash.com/photo-1558030006-450675393462?w=400&q=80'},
  {id:7,cat:'mains',name:'–†–∏–∑–æ—Ç—Ç–æ —Å –≥—Ä–∏–±–∞–º–∏',desc:'–ü–æ—Ä—Ç–æ–±–µ–ª–ª–æ, –ø–∞—Ä–º–µ–∑–∞–Ω, —Ç—Ä—é—Ñ–µ–ª—å–Ω–æ–µ –º–∞—Å–ª–æ',price:1290,img:'https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=400&q=80'},
  {id:8,cat:'desserts',name:'–ö—Ä–µ–º-–±—Ä—é–ª–µ',desc:'–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π, —Å –≤–∞–Ω–∏–ª—å—é –ë—É—Ä–±–æ–Ω',price:490,img:'https://images.unsplash.com/photo-1470124182917-cc6e71b22ecc?w=400&q=80'},
  {id:9,cat:'desserts',name:'–¢–∞—Ä—Ç –¢–∞—Ç–µ–Ω',desc:'–Ø–±–ª–æ—á–Ω—ã–π –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç—ã–π —Ç–∞—Ä—Ç, –∫—Ä–µ–º-—Ñ—Ä–µ—à',price:550,img:'https://images.unsplash.com/photo-1559622214-f8a9850965bb?w=400&q=80'},
  {id:10,cat:'desserts',name:'–®–æ–∫–æ–ª–∞–¥–Ω—ã–π —Ñ–æ–Ω–¥–∞–Ω',desc:'72% –≥–æ—Ä—å–∫–∏–π —à–æ–∫–æ–ª–∞–¥, –≤–∞–Ω–∏–ª—å–Ω–æ–µ –º–æ—Ä–æ–∂–µ–Ω–æ–µ',price:620,img:'https://images.unsplash.com/photo-1606313564200-e75d5e30476c?w=400&q=80'},
  {id:11,cat:'drinks',name:'–ë–æ–∫–∞–ª –ë—É—Ä–≥—É–Ω–¥–∏–∏',desc:'Pinot Noir, –¥–æ–º–µ–Ω –ñ–∞–Ω –ì–∏–≤–æ, 2020',price:890,img:'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=400&q=80'},
  {id:12,cat:'drinks',name:'–õ–∏–º–æ–Ω–∞–¥ Monsieur',desc:'–õ–∞–π–º, –±–∞–∑–∏–ª–∏–∫, –º—è—Ç–∞, –≥–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–æ–¥–∞',price:390,img:'https://images.unsplash.com/photo-1621263764928-df1444c5e859?w=400&q=80'},
  {id:13,cat:'drinks',name:'–ö–æ—Ñ–µ –ø–æ-—Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏',desc:'Double espresso, –≥–æ—Ä—å–∫–∏–π —à–æ–∫–æ–ª–∞–¥, –ø–µ–Ω–∞',price:350,img:'https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400&q=80'},
];
const CATS=[{id:'all',l:'–í—Å—ë'},{id:'starters',l:'–ó–∞–∫—É—Å–∫–∏'},{id:'mains',l:'–û—Å–Ω–æ–≤–Ω—ã–µ'},{id:'desserts',l:'–î–µ—Å–µ—Ä—Ç—ã'},{id:'drinks',l:'–ù–∞–ø–∏—Ç–∫–∏'}];
const ALL_TIMES=['12:00','13:00','14:00','15:00','17:00','18:00','19:00','20:00','21:00','22:00'];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STATE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let cart={}, activeCat='all', selGuests=2, selTime='', pendingData=null;

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê BOOKING PERSISTENCE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function getBooked(date){try{return JSON.parse(localStorage.getItem('bk_'+date)||'[]')}catch{return[]}}
function saveBooked(date,time){const a=getBooked(date);if(!a.includes(time))a.push(time);localStorage.setItem('bk_'+date,JSON.stringify(a))}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TELEGRAM ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const tg=window.Telegram?.WebApp;
if(tg){tg.ready();tg.expand();}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SEND TO BOT ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function sendToBot(data){
  try{
    if(tg && tg.sendData){
      tg.sendData(JSON.stringify(data));
    } else {
      // Fallback –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–µ Telegram
      fetch('/api/webapp-data',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).catch(()=>{});
    }
  } catch(e){
    console.error('sendData error:',e);
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAV SLIDER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const navEl=document.getElementById('nav');
const glow=document.getElementById('navGlow');
function moveGlow(btn){
  const r=btn.getBoundingClientRect(),nr=navEl.getBoundingClientRect();
  glow.style.left=(r.left-nr.left)+'px';
  glow.style.width=r.width+'px';
}
document.querySelectorAll('.nav-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('page-'+btn.dataset.page).classList.add('active');
    moveGlow(btn);
    if(btn.dataset.page==='order')renderOrder();
    if(btn.dataset.page==='booking')renderTimeGrid();
    window.scrollTo({top:0,behavior:'smooth'});
  });
});
setTimeout(()=>moveGlow(document.querySelector('.nav-btn.active')),50);

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CATEGORIES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function buildCats(){
  const w=document.getElementById('catWrap');
  w.innerHTML=CATS.map(c=>`<button class="cat-pill ${c.id===activeCat?'active':''}" data-cat="${c.id}"><span>${c.l}</span></button>`).join('');
  w.querySelectorAll('.cat-pill').forEach(b=>b.addEventListener('click',()=>{activeCat=b.dataset.cat;buildCats();buildMenu();}));
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MENU ‚Äî –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function buildMenu(){
  const grid=document.getElementById('menuGrid');
  const items=activeCat==='all'?MENU:MENU.filter(m=>m.cat===activeCat);
  grid.innerHTML=items.map((item,i)=>{
    return `<div class="mcard" id="mcard_${item.id}" style="animation-delay:${i*45}ms">
      <div class="mcard-img-wrap">
        <img class="mcard-img" data-src="${item.img}" alt="${item.name}"/>
        <div class="mcard-img-overlay"></div>
      </div>
      <div class="mcard-body">
        <div>
          <div class="mcard-name">${item.name}</div>
          <div class="mcard-desc">${item.desc}</div>
        </div>
        <div class="mcard-foot">
          <div class="mcard-price">${item.price.toLocaleString()} ‚ÇΩ</div>
          <div class="mcard-action" id="action_${item.id}"></div>
        </div>
      </div>
    </div>`;
  }).join('');

  // Lazy load images + fade in
  grid.querySelectorAll('.mcard-img').forEach(img=>{
    img.onload=()=>img.classList.add('loaded');
    img.src=img.dataset.src;
  });

  // Intersection Observer –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫
  const obs=new IntersectionObserver(entries=>{
    entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('in');obs.unobserve(e.target);}});
  },{threshold:0.04});
  grid.querySelectorAll('.mcard').forEach(c=>obs.observe(c));

  // Render action areas
  items.forEach(item=>renderAction(item.id));
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê –ö–õ–Æ–ß–ï–í–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
   –û–±–Ω–æ–≤–ª—è–µ–º –¢–û–õ–¨–ö–û –∫–Ω–æ–ø–∫—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏, 
   –ù–ï –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤—Å—ë –º–µ–Ω—é ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderAction(id){
  const el=document.getElementById('action_'+id);
  if(!el)return;
  const qty=cart[id]||0;
  if(qty===0){
    el.innerHTML=`<button class="add-btn" onclick="addItem(${id},this)"><span class="plus">+</span></button>`;
  } else {
    el.innerHTML=`<div class="qty-ctrl">
      <button class="qty-btn" onclick="removeItem(${id})">‚àí</button>
      <span class="qty-num" id="num_${id}">${qty}</span>
      <button class="qty-btn" onclick="addItem(${id})">+</button>
    </div>`;
  }
}

function addItem(id,btn){
  cart[id]=(cart[id]||0)+1;
  updateBadge();
  renderAction(id); // —Ç–æ–ª—å–∫–æ —ç—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∞
  const numEl=document.getElementById('num_'+id);
  if(numEl){numEl.classList.remove('bump');void numEl.offsetWidth;numEl.classList.add('bump');}
  const item=MENU.find(m=>m.id===id);
  showToast('‚ú¶  '+item.name);
  if(btn){addRipple(btn,null);}
}

function removeItem(id){
  if(!cart[id])return;
  cart[id]--;
  if(!cart[id])delete cart[id];
  updateBadge();
  renderAction(id); // —Ç–æ–ª—å–∫–æ —ç—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∞
}

function updateBadge(){
  const total=Object.values(cart).reduce((a,b)=>a+b,0);
  const badge=document.getElementById('cartBadge');
  if(total>0){badge.style.display='';badge.textContent=total;badge.classList.remove('pop');void badge.offsetWidth;badge.classList.add('pop');}
  else badge.style.display='none';
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PHONE MASK ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function initPhoneMask(){
  const inp=document.getElementById('bPhone');
  inp.addEventListener('input',e=>{
    let v=inp.value.replace(/\D/g,'');
    // –£–±–∏—Ä–∞–µ–º –≤–µ–¥—É—â—É—é 7 –∏–ª–∏ 8 –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –≤–≤–µ–ª–∏
    if(v.startsWith('7')||v.startsWith('8'))v=v.slice(1);
    v=v.slice(0,10);
    let mask='';
    if(v.length>0)mask='('+v.slice(0,3);
    if(v.length>=3)mask+=') '+v.slice(3,6);
    else if(v.length>0)mask+=v.slice(3);
    if(v.length>=6)mask+='-'+v.slice(6,8);
    if(v.length>=8)mask+='-'+v.slice(8,10);
    inp.value=mask;
  });
  inp.addEventListener('keydown',e=>{
    if(e.key==='Backspace'&&inp.value.length===0)e.preventDefault();
  });
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TIME GRID ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderTimeGrid(){
  const date=document.getElementById('bDate').value;
  const booked=getBooked(date);
  const grid=document.getElementById('timeGrid');
  grid.innerHTML=ALL_TIMES.map(t=>{
    const isBusy=booked.includes(t);
    const isSel=t===selTime&&!isBusy;
    const cls=isBusy?'busy':isSel?'sel':'free';
    const stat=isBusy?'–∑–∞–Ω—è—Ç–æ':isSel?'–≤—ã–±—Ä–∞–Ω–æ':'—Å–≤–æ–±–æ–¥–Ω–æ';
    return `<button class="t-btn ${cls}" onclick="selectTime('${t}')" ${isBusy?'disabled':''}>
      <span class="t-time">${t}</span>
      <span class="t-stat">${stat}</span>
    </button>`;
  }).join('');
}
function selectTime(t){
  const d=document.getElementById('bDate').value;
  if(getBooked(d).includes(t))return;
  selTime=t;renderTimeGrid();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GUESTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function buildGuests(){
  document.getElementById('guestGrid').innerHTML=[1,2,3,4,5,6].map(n=>
    `<button class="g-btn ${n===selGuests?'active':''}" onclick="selGuest(${n})">${n}</button>`
  ).join('');
}
function selGuest(n){selGuests=n;buildGuests();}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SUBMIT BOOKING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function submitBooking(e){
  addRipple(e.currentTarget,e);
  const name=document.getElementById('bName').value.trim();
  const phone=document.getElementById('bPhone').value.trim();
  const date=document.getElementById('bDate').value;
  const comment=document.getElementById('bComment').value.trim();
  if(!name||!phone||!date||!selTime){showToast('‚ö†  –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');return;}

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –∫–∞–∫ –∑–∞–Ω—è—Ç–æ–µ —Å—Ä–∞–∑—É
  saveBooked(date,selTime);
  renderTimeGrid();

  const data={type:'booking',name,phone:'+7'+phone.replace(/\D/g,''),date,time:selTime,guests:selGuests,comment};
  pendingData=data;
  const d=new Date(date);
  const months=['—è–Ω–≤','—Ñ–µ–≤','–º–∞—Ä','–∞–ø—Ä','–º–∞–π','–∏—é–Ω','–∏—é–ª','–∞–≤–≥','—Å–µ–Ω','–æ–∫—Ç','–Ω–æ—è','–¥–µ–∫'];
  showSuccess('ü•Ç','–ë—Ä–æ–Ω—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!',`–°—Ç–æ–ª–∏–∫ –Ω–∞ ${selGuests} ${gw(selGuests)}\n${d.getDate()} ${months[d.getMonth()]} ¬∑ ${selTime}\n\n–ú—ã —Å–≤—è–∂–µ–º—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è`);
  selTime='';
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RENDER ORDER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderOrder(){
  const el=document.getElementById('orderContent');
  const keys=Object.keys(cart).map(Number);
  if(!keys.length){
    el.innerHTML=`<div class="empty-state"><div class="empty-icon">üçΩ</div><div class="empty-txt">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞<br>–í—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–∞ –∏–∑ –º–µ–Ω—é</div></div>`;
    return;
  }
  let sub=0;
  const rows=keys.map(id=>{
    const m=MENU.find(x=>x.id===id);const tot=m.price*cart[id];sub+=tot;
    return `<div class="oitem"><img class="oitem-img" src="${m.img}"/><div class="oitem-info"><div class="oitem-name">${m.name}</div><div class="oitem-qty">${cart[id]} √ó ${m.price.toLocaleString()} ‚ÇΩ</div></div><div class="oitem-price">${tot.toLocaleString()} ‚ÇΩ</div></div>`;
  }).join('');
  const svc=Math.round(sub*.1),total=sub+svc;
  el.innerHTML=`<div class="order-list">${rows}</div>
  <div class="order-summary">
    <div class="sum-row"><span>–°—É–º–º–∞</span><span>${sub.toLocaleString()} ‚ÇΩ</span></div>
    <div class="sum-row"><span>–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä (10%)</span><span>${svc.toLocaleString()} ‚ÇΩ</span></div>
    <div class="sum-row total"><span>–ò—Ç–æ–≥–æ</span><span>${total.toLocaleString()} ‚ÇΩ</span></div>
  </div>
  <div style="padding:16px 20px 0"><button class="cta-btn" onclick="submitOrder(event)">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button></div>`;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SUBMIT ORDER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function submitOrder(e){
  addRipple(e.currentTarget,e);
  const keys=Object.keys(cart).map(Number);
  if(!keys.length)return;
  const items=keys.map(id=>{const m=MENU.find(x=>x.id===id);return`${m.name} √ó ${cart[id]}`;});
  const total=keys.reduce((s,id)=>s+MENU.find(x=>x.id===id).price*cart[id],0);
  pendingData={type:'order',items,total};
  cart={};updateBadge();
  showSuccess('üçΩ','–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!',`–í–∞—à –∑–∞–∫–∞–∑ –ø–µ—Ä–µ–¥–∞–Ω –Ω–∞ –∫—É—Ö–Ω—é\n–û–∂–∏–¥–∞–π—Ç–µ 30‚Äì40 –º–∏–Ω—É—Ç\n\n–°—É–º–º–∞: ${total.toLocaleString()} ‚ÇΩ`);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SUCCESS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function showSuccess(icon,title,text){
  document.getElementById('sIcon').textContent=icon;
  document.getElementById('sTitle').textContent=title;
  document.getElementById('sText').textContent=text;
  document.getElementById('successOverlay').classList.add('show');
  spawnSparks();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CLOSE SUCCESS ‚Äî –∑–¥–µ—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function closeSuccess(){
  document.getElementById('successOverlay').classList.remove('show');
  if(pendingData){
    sendToBot(pendingData);
    pendingData=null;
  }
}

function spawnSparks(){
  const c=document.getElementById('sparks');c.innerHTML='';
  const cols=['#c8a45a','#e2c07a','#f5dda0','#d4621a','#fff8e7'];
  const cx=window.innerWidth/2,cy=window.innerHeight/2;
  for(let i=0;i<32;i++){
    const s=document.createElement('div');s.className='spark';
    const angle=(i/32)*Math.PI*2,dist=70+Math.random()*160;
    Object.assign(s.style,{
      left:cx+'px',top:cy+'px',
      background:cols[i%cols.length],
      width:(2+Math.random()*5)+'px',height:(2+Math.random()*5)+'px',
      '--tx':(Math.cos(angle)*dist)+'px',
      '--ty':(Math.sin(angle)*dist)+'px',
      '--dur':(.7+Math.random()*.7)+'s',
      '--del':(Math.random()*.25)+'s',
    });
    c.appendChild(s);
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAPS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function openMaps(e){
  e.preventDefault();
  const modal=document.getElementById('mapsModal');
  modal.style.display='flex';
}
document.getElementById('mapsModal').addEventListener('click',function(e){
  if(e.target===this)this.style.display='none';
});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let toastTm;
function showToast(msg){
  const t=document.getElementById('toast');t.textContent=msg;
  t.classList.add('show');clearTimeout(toastTm);
  toastTm=setTimeout(()=>t.classList.remove('show'),2300);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RIPPLE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function addRipple(btn,e){
  const r=document.createElement('span');r.className='rpl';
  const rect=btn.getBoundingClientRect();
  const size=Math.max(btn.offsetWidth,btn.offsetHeight)*2;
  const x=e?e.clientX-rect.left-size/2:btn.offsetWidth/2-size/2;
  const y=e?e.clientY-rect.top-size/2:btn.offsetHeight/2-size/2;
  Object.assign(r.style,{width:size+'px',height:size+'px',left:x+'px',top:y+'px'});
  btn.appendChild(r);setTimeout(()=>r.remove(),600);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HELPERS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function gw(n){return n===1?'–≥–æ—Å—Ç—è':'–≥–æ—Å—Ç–µ–π'}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
window.addEventListener('DOMContentLoaded',()=>{
  const today=new Date().toISOString().split('T')[0];
  const dateEl=document.getElementById('bDate');
  dateEl.min=today;dateEl.value=today;
  dateEl.addEventListener('change',()=>{selTime='';renderTimeGrid();});

  buildCats();buildMenu();renderTimeGrid();buildGuests();initPhoneMask();
});
</script>
</body>
</html>
